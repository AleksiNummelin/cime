<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>2. Creating New Compsets &mdash; CIME 5.4.0 documentation</title>
    
    <link rel="stylesheet" href="../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '5.4.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="CIME 5.4.0 documentation" href="../index.html" />
    <link rel="up" title="CIME User’s Guide Part 1: Beginner - Basic Usage" href="index.html" />
    <link rel="next" title="3. Porting and validating CIME on a new platform" href="porting-cime.html" />
    <link rel="prev" title="1. CIME internals" href="cime-internals.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="porting-cime.html" title="3. Porting and validating CIME on a new platform"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="cime-internals.html" title="1. CIME internals"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">CIME 5.4.0 documentation</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">CIME User&#8217;s Guide Part 1: Beginner - Basic Usage</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="creating-new-compsets">
<span id="id1"></span><h1>2. Creating New Compsets<a class="headerlink" href="#creating-new-compsets" title="Permalink to this headline">¶</a></h1>
<p>A description of how CIME interprets a compset name is given in the section <a class="reference internal" href="cime-internals.html#defining-compsets"><span class="std std-ref">Where are compsets defined?</span></a> .</p>
<p>To create a new compset, you will at a minimum have to:</p>
<ol class="arabic simple">
<li>edit the approprite <code class="docutils literal"><span class="pre">config_components.xml</span></code> file(s) to add your new requirements</li>
<li>edit associate <code class="docutils literal"><span class="pre">namelist_definitions_xxx.xml</span></code> in the associated <code class="docutils literal"><span class="pre">cime_config</span></code> directories.
(e.g. if a change is made to the the <code class="docutils literal"><span class="pre">config_components.xml</span></code> for <code class="docutils literal"><span class="pre">DOCN</span></code> then <code class="docutils literal"><span class="pre">namelist_definitions_docn.xml</span></code> file will also need to be modified).</li>
</ol>
<p>It is important to point out, that you will need expertise in the target component(s) you are trying to modify in order to add new compset functionality for that particular component.
We provide a few examples below that outline this process for a few simple cases.</p>
<div class="section" id="example-1">
<h2>2.1. Example 1:<a class="headerlink" href="#example-1" title="Permalink to this headline">¶</a></h2>
<p>Say you want to add a new mode, <code class="docutils literal"><span class="pre">FOO</span></code>,  to the data ocean model, <code class="docutils literal"><span class="pre">DOCN</span></code>. Lets call this mode, <code class="docutils literal"><span class="pre">FOO</span></code>.
This would imply when parsing the compset longname, CIME would need to be able to recognize the string <code class="docutils literal"><span class="pre">_DOCN%FOO_</span></code>.
To enable this, you will need to do the following:</p>
<ol class="arabic">
<li><p class="first">edit <code class="docutils literal"><span class="pre">$CIMEROOT/src/components/data_comps/docn/cime_config/config_component.xml</span></code> (see the <code class="docutils literal"><span class="pre">FOO</span></code> additions below).</p>
<ul>
<li><p class="first">add an entry to the <code class="docutils literal"><span class="pre">&lt;description</span> <span class="pre">modifier</span> <span class="pre">block=&quot;1&quot;&gt;</span></code> block as shown below</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">description</span> <span class="n">modifier_mode</span><span class="o">=</span><span class="s2">&quot;1&quot;</span><span class="o">&gt;</span>
   <span class="o">&lt;</span><span class="n">desc</span> <span class="n">ocn</span><span class="o">=</span><span class="s2">&quot;DOCN...[</span><span class="si">%F</span><span class="s2">OO]&quot;</span><span class="o">&gt;</span><span class="n">DOCN</span> <span class="o">&lt;/</span><span class="n">desc</span><span class="o">&gt;</span>
   <span class="o">...</span>
   <span class="o">&lt;</span><span class="n">desc</span> <span class="n">option</span><span class="o">=</span><span class="s2">&quot;FOO&quot;</span><span class="o">&gt;</span> <span class="n">new</span>  <span class="n">mode</span><span class="o">&lt;/</span><span class="n">desc</span><span class="o">&gt;</span>
   <span class="o">....</span>
<span class="o">&lt;/</span><span class="n">description</span><span class="o">&gt;</span>
</pre></div>
</div>
</li>
<li><p class="first">add an entry to the <code class="docutils literal"><span class="pre">&lt;entry</span> <span class="pre">id=&quot;DOCN_MODE&quot;&gt;</span></code> block as shown below:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">entry</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;DOCN_MODE&quot;</span><span class="o">&gt;</span>
   <span class="o">....</span>
   <span class="o">&lt;</span><span class="n">values</span> <span class="n">match</span><span class="o">=</span><span class="s2">&quot;last&quot;</span><span class="o">&gt;</span>
   <span class="o">....</span>
   <span class="o">&lt;</span><span class="n">value</span> <span class="n">compset</span><span class="o">=</span><span class="s2">&quot;_DOCN</span><span class="si">%F</span><span class="s2">OO_&quot;</span> <span class="o">&gt;</span><span class="n">prescribed</span><span class="o">&lt;/</span><span class="n">value</span><span class="o">&gt;</span>
   <span class="o">...</span>
<span class="o">&lt;/</span><span class="n">entry</span><span class="o">&gt;</span>
</pre></div>
</div>
</li>
<li><p class="first">modify any of the other xml entries that need a new dependence on <code class="docutils literal"><span class="pre">FOO</span></code></p>
</li>
</ul>
</li>
<li><p class="first">edit <code class="docutils literal"><span class="pre">$CIMEROOT/src/components/data_comps/docn/cime_config/namelist_definition_docn.xml</span></code> (see the <code class="docutils literal"><span class="pre">FOO</span></code> additions below).</p>
<ul>
<li><p class="first">add an entry to the <code class="docutils literal"><span class="pre">datamode</span></code> block as shown below.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">entry</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;datamode&quot;</span><span class="o">&gt;</span>
   <span class="o">....</span>
   <span class="o">&lt;</span><span class="n">valid_values</span><span class="o">&gt;...</span><span class="n">FOO</span><span class="o">&lt;/</span><span class="n">valid_values</span><span class="o">&gt;</span>
   <span class="o">...</span>
<span class="o">&lt;/</span><span class="n">entry</span><span class="o">&gt;</span>
</pre></div>
</div>
</li>
<li><p class="first">add additional changes to <code class="docutils literal"><span class="pre">namelist_definition_docn.xml</span></code> for the new mode</p>
</li>
</ul>
</li>
</ol>
<div class="admonition-todo admonition" id="index-0">
<p class="first admonition-title">Todo</p>
<p class="last">Add additional examples for creating a case</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">2. Creating New Compsets</a><ul>
<li><a class="reference internal" href="#example-1">2.1. Example 1:</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="cime-internals.html"
                        title="previous chapter">1. CIME internals</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="porting-cime.html"
                        title="next chapter">3. Porting and validating CIME on a new platform</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/users_guide/creating-new-compsets.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="porting-cime.html" title="3. Porting and validating CIME on a new platform"
             >next</a> |</li>
        <li class="right" >
          <a href="cime-internals.html" title="1. CIME internals"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">CIME 5.4.0 documentation</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="index.html" >CIME User&#8217;s Guide Part 1: Beginner - Basic Usage</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2017, U.S. National Science Foundation and U.S. Department of Energy.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.4.3.
    </div>
  </body>
</html>