

<!doctype html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>3. Creating a Case &mdash; CIME 5.3.0 documentation</title>
    
    <link rel="stylesheet" href="../_static/bizstyle.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '5.3.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/bizstyle.js"></script>
    <link rel="top" title="CIME 5.3.0 documentation" href="../index.html" />
    <link rel="up" title="CIME User’s Guide Part 1: Beginner - Basic Usage" href="index.html" />
    <link rel="next" title="4. Setting up a Case" href="setting-up-a-case.html" />
    <link rel="prev" title="2. The basics of CIME cases" href="case-basics.html" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <!--[if lt IE 9]>
    <script type="text/javascript" src="_static/css3-mediaqueries.js"></script>
    <![endif]-->
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="setting-up-a-case.html" title="4. Setting up a Case"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="case-basics.html" title="2. The basics of CIME cases"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">CIME 5.3.0 documentation</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">CIME User&#8217;s Guide Part 1: Beginner - Basic Usage</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">3. Creating a Case</a><ul>
<li><a class="reference internal" href="#calling-create-newcase">3.1. Calling <strong>create_newcase</strong></a></li>
<li><a class="reference internal" href="#results-of-calling-create-newcase">3.2. Results of calling <strong>create_newcase</strong></a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="case-basics.html"
                        title="previous chapter">2. The basics of CIME cases</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="setting-up-a-case.html"
                        title="next chapter">4. Setting up a Case</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/users_guide/create-a-case.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="creating-a-case">
<span id="id1"></span><h1>3. Creating a Case<a class="headerlink" href="#creating-a-case" title="Permalink to this headline">¶</a></h1>
<div class="section" id="calling-create-newcase">
<h2>3.1. Calling <strong>create_newcase</strong><a class="headerlink" href="#calling-create-newcase" title="Permalink to this headline">¶</a></h2>
<p>The first step in creating a CIME-based experiment is to use <strong>create_newcase</strong>.</p>
<p>If you are not on an out-of-the box CIME-supported platform, you will need to <a class="reference internal" href="porting-cime.html#porting"><span class="std std-ref">port</span></a> CIME to your system before proceeding.</p>
<p>Review the input options for <strong>create_newcase</strong> in the  <strong>help</strong> text.:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">create_newcase</span> <span class="o">--</span><span class="n">help</span>
</pre></div>
</div>
<p>The only required arguments to <strong>create_newcase</strong> are shown here:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">create_newcase</span> <span class="o">--</span><span class="n">case</span> <span class="p">[</span><span class="n">CASE</span><span class="p">]</span> <span class="o">--</span><span class="n">compset</span> <span class="p">[</span><span class="n">COMPSET</span><span class="p">]</span> <span class="o">--</span><span class="n">res</span> <span class="p">[</span><span class="n">GRID</span><span class="p">]</span>
</pre></div>
</div>
<p>CIME supports out-of-the-box <em>component sets</em>, <em>model grids</em> and <em>hardware platforms</em>. Compsets and grids were discussed in the <a class="reference internal" href="case-basics.html#case-basics"><span class="std std-ref">previous section</span></a>.</p>
</div>
<div class="section" id="results-of-calling-create-newcase">
<h2>3.2. Results of calling <strong>create_newcase</strong><a class="headerlink" href="#results-of-calling-create-newcase" title="Permalink to this headline">¶</a></h2>
<p>Following is a simple example of using <strong>create_newcase</strong> with aliases for both compset and grid names.
The complete example appears in the <a class="reference internal" href="use_cases/basics-a-basic-example.html#use-cases-basic-example"><span class="std std-ref">basic example</span></a>.</p>
<p>Here, <code class="docutils literal"><span class="pre">$CIMEROOT</span></code> is the full pathname of the root directory of the CIME distribution:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>&gt; cd $CIMEROOT/scripts
&gt; create_newcase --case ~/cime/example1 --compset A --res f09_g16_rx1
</pre></div>
</div>
<p>In the example, the command creates a <code class="docutils literal"><span class="pre">$CASEROOT</span></code> directory: <strong>~/cime/example1</strong>. If that directory already exists, a warning is printed and the command aborts. Additional details:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">$CASE</span></code> can include letters, numbers,  &#8221;.&#8221;, and &#8220;_&#8221;. In the example, it is <code class="docutils literal"><span class="pre">example1</span></code>.</li>
<li>The compset is <code class="docutils literal"><span class="pre">2000_DATM%NYF_SLND_DICE%SSMI_DOCN%DOM_DROF%NYF_SGLC_SWAV</span></code>.</li>
<li>The model resolution is <code class="docutils literal"><span class="pre">a%0.9x1.25_l%0.9x1.25_oi%gx1v6_r%r05_m%gx1v6_g%null_w%null</span></code>.</li>
<li><strong>create_newcase</strong> installs files in <code class="docutils literal"><span class="pre">$CASEROOT</span></code> to build and run the model and to optionally archive the case on the target platform.</li>
</ul>
<p>Running <strong>create_newcase</strong> creates various scripts, files and directories <code class="docutils literal"><span class="pre">$CASEROOT</span></code>, as shown here.</p>
<ul>
<li><p class="first"><code class="docutils literal"><span class="pre">user</span> <span class="pre">scripts</span></code></p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="89%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>case.setup</td>
<td>Script used to set up the case (create the case.run script, the Macros file and user_nl_xxx files).</td>
</tr>
<tr class="row-even"><td>case.build</td>
<td>Script to build component and utility libraries and model executable.</td>
</tr>
<tr class="row-odd"><td>case.submit</td>
<td>Script to submit the case to run using the machine&#8217;s batch queueing system.</td>
</tr>
<tr class="row-even"><td>case.cmpgen_namelist</td>
<td>Script to perform namelist baseline operations (compare, generate, or both).</td>
</tr>
<tr class="row-odd"><td>xmlchange</td>
<td>Script to modify values in the xml files.</td>
</tr>
<tr class="row-even"><td>xmlquery</td>
<td>Script to query values in the xml files.</td>
</tr>
<tr class="row-odd"><td>preview_namelists</td>
<td>Script for users to see their component namelists in <code class="docutils literal"><span class="pre">$CASEROOT/CaseDocs</span></code> before running the model.</td>
</tr>
<tr class="row-even"><td>preview_run</td>
<td>Script for users to see batch submit and mpirun command.</td>
</tr>
<tr class="row-odd"><td>check_input_data</td>
<td>Script for checking for various input data sets and moving them into place.</td>
</tr>
<tr class="row-even"><td>check_case</td>
<td>Script to verify case is set up correctly</td>
</tr>
<tr class="row-odd"><td>pelayout</td>
<td>Script to query and modify the NTASKS, ROOTPE, and NTHRDS for each component model.  This a convenience script that can be used in place of xmlchange and xmlquery.</td>
</tr>
</tbody>
</table>
</div></blockquote>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">XML</span> <span class="pre">files</span></code></p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="14%" />
<col width="86%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>env_archive.xml</td>
<td>Defines patters of files to be sent to the short-term archive.</td>
</tr>
<tr class="row-even"><td>env_mach_specific.xml</td>
<td><p class="first">Sets a number of machine-specific environment variables for building and/or running.</p>
<p class="last">You can edit this file at any time.</p>
</td>
</tr>
<tr class="row-odd"><td>env_case.xml</td>
<td><p class="first">Sets case specific variables (e.g. model components, model and case root directories).</p>
<p>Cannot be modified after a case has been created.</p>
<p class="last">To make changes, your should re-run <strong>create_newcase</strong> with different options.</p>
</td>
</tr>
<tr class="row-even"><td>env_build.xml</td>
<td><p class="first">Sets model build settings.</p>
<p class="last">This includes component resolutions and component compile-time configuration options.
You must run the case.build command after changing this file.</p>
</td>
</tr>
<tr class="row-odd"><td>env_mach_pes.xml</td>
<td><p class="first">Sets component machine-specific processor layout (see <a class="reference internal" href="customizing-a-case.html#changing-the-pe-layout"><span class="std std-ref">changing pe layout</span></a> ).</p>
<p class="last">The settings in this are critical to a well-load-balanced simulation (see <a class="reference internal" href="optimizing-processor-layout.html#optimizing-processor-layout"><span class="std std-ref">load balancing</span></a>).</p>
</td>
</tr>
<tr class="row-even"><td>env_run.xml</td>
<td>Sets runtime settings such as length of run, frequency of restarts, output of coupler diagnostics,
and short-term and long-term archiving.  This file can be edited at any time before a job starts.</td>
</tr>
<tr class="row-odd"><td>env_batch.xml</td>
<td>Sets batch system settings such as wallclock time and queue name.</td>
</tr>
</tbody>
</table>
</div></blockquote>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">User</span> <span class="pre">Source</span> <span class="pre">Mods</span> <span class="pre">Directory</span></code></p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="14%" />
<col width="86%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>SourceMods</td>
<td>Top-level directory containing subdirectories for each compset component where
you can place modified source code for that component.  You may also place modified
buildnml and buildlib scripts here.</td>
</tr>
</tbody>
</table>
</div></blockquote>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">Provenance</span></code></p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="14%" />
<col width="86%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>README.case</td>
<td>File detailing <strong>create_newcase</strong> usage. This is a good place to keep track of runtime problems and changes.</td>
</tr>
<tr class="row-even"><td>CaseStatus</td>
<td>File containing a list of operations done in the current case.</td>
</tr>
</tbody>
</table>
</div></blockquote>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">non-modifiable</span> <span class="pre">work</span> <span class="pre">directories</span></code></p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>Buildconf/</td>
<td>Work directory containing scripts to generate component namelists and component and utility libraries
(PIO or MCT, for example). You should never have to edit the contents of this directory.</td>
</tr>
<tr class="row-even"><td>LockedFiles/</td>
<td><p class="first">Work directory that holds copies of files that should not be changed.</p>
<p>Certain xml files are <em>locked</em> after their variables have been used by should no longer be changed.</p>
<p class="last">CIME does this by <em>locking</em> a file and not permitting you to modify that file unless, depending on the file,                              <code class="docutils literal"><span class="pre">case.setup</span> <span class="pre">--clean</span></code> or  <code class="docutils literal"><span class="pre">case.build</span> <span class="pre">--clean</span></code> is called.</p>
</td>
</tr>
<tr class="row-odd"><td>Tools/</td>
<td>Work directory containing support utility scripts. You should never need to edit the contents of this directory.</td>
</tr>
</tbody>
</table>
</div></blockquote>
</li>
</ul>
<p>The <code class="docutils literal"><span class="pre">$CASEROOT</span></code> xml files are organized so that variables can be locked at certain points after they have been resolved (used) in other parts of the scripts system.</p>
<p>CIME does the following:</p>
<ul class="simple">
<li>Locks variables in <strong>env_case.xml</strong> after <strong>create_newcase</strong>.</li>
<li>Locks variables in <strong>env_mach_pes.xml</strong> after <strong>case.setup</strong>.</li>
<li>Locks variables in <strong>env_build.xml</strong> after completion of <strong>case.build</strong>.</li>
</ul>
<p>Variables in <strong>env_run.xml</strong>, <strong>env_batch.xml</strong> and <strong>env_archive.xml</strong> are never locked, and most can be changed at any time. There are some exceptions in the <strong>env_batch.xml</strong> file.</p>
<p>The <strong>env_case.html</strong> file can never be unlocked.</p>
<p>These other files can be &#8220;unlocked&#8221; as follows:</p>
<ul class="simple">
<li>To unlock <strong>env_mach_pes.xml</strong>, run <code class="docutils literal"><span class="pre">case.setup</span> <span class="pre">--clean</span></code>.</li>
<li>To unlock <strong>env_build.xml</strong>, run <code class="docutils literal"><span class="pre">case.build</span> <span class="pre">--clean</span></code>.</li>
</ul>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="setting-up-a-case.html" title="4. Setting up a Case"
             >next</a> |</li>
        <li class="right" >
          <a href="case-basics.html" title="2. The basics of CIME cases"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">CIME 5.3.0 documentation</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="index.html" >CIME User&#8217;s Guide Part 1: Beginner - Basic Usage</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2017, U.S. National Science Foundation and U.S. Department of Energy.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.4.3.
    </div>
  </body>
</html>